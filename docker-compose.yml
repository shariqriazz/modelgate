services:
  modelgate:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VERSION: ${VERSION:-dev}
        COMMIT: ${COMMIT:-none}
        BUILD_DATE: ${BUILD_DATE:-unknown}
    container_name: modelgate
    environment:
      DEPLOY: ${DEPLOY:-}
    ports:
      - "4091:4091"
    volumes:
      - ./config.server.yaml:/app/config.yaml
      - /root/.modelgate:/root/.modelgate
      - ./logs:/app/logs
    restart: unless-stopped
